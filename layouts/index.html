{{ define "main" }}
<div class="container">
    <h1>Álbum Familiar</h1>
    
    {{ $photos := where site.RegularPages "Section" "fotos" }}
    
    <div class="photo-grid">
        {{ range first 20 $photos }}
        <div class="photo-card" data-year="{{ .Params.year }}" data-month="{{ .Params.month }}">
            <a href="{{ .RelPermalink }}">
                {{ if .Params.thumbnail }}
                {{ $thumb := strings.TrimPrefix "/" .Params.thumbnail }}
                <img src="{{ $.Site.BaseURL }}{{ $thumb }}" 
                     alt="{{ .Title }}" 
                     loading="lazy">
                {{ else }}
                <img src="{{ $.Site.BaseURL }}images/placeholder.jpg" 
                     alt="{{ .Title }}" 
                     loading="lazy">
                {{ end }}
                <div class="photo-info">
                    <h3>{{ .Title }}</h3>
                    <time>{{ .Date.Format "2 January 2006" }}</time>
                </div>
            </a>
        </div>
        {{ end }}
    </div>
    
    {{ if gt (len $photos) 20 }}
    <div class="more-photos">
        <a href="/recuerdos-familia/fotos/" class="btn-primary">Ver todas las {{ len $photos }} fotos →</a>
    </div>
    {{ end }}
</div>
{{ end }}
